(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{46:function(t,e,n){},49:function(t,e,n){},57:function(t,e,n){},60:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(37),s=n.n(c),i=(n(46),n(5)),o=n(6),u=n(8),l=n(7),j=n(9),d=n(4),h=n.n(d),b=n(13),O=n(29),p=n(26),f=n(27),m=n(1),v=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)("h1",{className:"loading",children:"Carregando..."})}}]),n}(a.Component),x=v,g=n(2),k="user",S=function(t){return localStorage.setItem(k,JSON.stringify(t))},y=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},N=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(k));null===e&&(e={}),y(e)(t)}))},w=function(t){return new Promise((function(e){S(Object(g.a)(Object(g.a)({},{name:"",email:"",image:"",description:""}),t)),y("OK")(e)}))},I=(n(49),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).checkButton=function(e){var n=e.target;return t.setState({valueLogin:n.value}),n.value.length>=3?t.setState({stateButton:!1}):t.setState({stateButton:!0})},t.user=Object(b.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.valueLogin,t.setState({loading:!0}),a={name:n},e.next=5,w(a);case 5:t.setState({onLogin:!0});case 6:case"end":return e.stop()}}),e)}))),t.state={stateButton:!0,valueLogin:"",loading:!1,onLogin:!1},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.stateButton,n=t.valueLogin,a=t.loading;return!0===t.onLogin?Object(m.jsx)(j.a,{to:"/search"}):Object(m.jsx)("div",{"data-testid":"page-login",className:"AllBody",children:a?Object(m.jsx)(x,{}):Object(m.jsx)(p.a,{className:"loginContainer",children:Object(m.jsxs)("div",{className:"quadrado",children:[Object(m.jsx)(f.a,{children:Object(m.jsx)("h1",{children:"Login"})}),Object(m.jsxs)(f.a,{children:[Object(m.jsx)("input",{type:"text","data-testid":"login-name-input",onChange:this.checkButton,value:n,placeholder:"Qual seu nome?"}),Object(m.jsx)(O.a,{variant:"primary",type:"button","data-testid":"login-submit-button",disabled:e,onClick:this.user,children:"Entrar"})]})]})})})}}]),n}(a.Component)),C=n(23),B=n(15),L=n(22),P=(n(57),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).checkUser=Object(b.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:n=e.sent,t.setState({userName:n.name});case 4:case"end":return e.stop()}}),e)}))),t.state={userName:""},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.checkUser()}},{key:"render",value:function(){var t=this.state.userName;return Object(m.jsxs)(L.a,{variant:"tabs","data-testid":"header-component",className:"header",children:[Object(m.jsx)("div",{className:"user",children:t.length<3?Object(m.jsx)("p",{children:"Carregando..."}):Object(m.jsx)(L.a.Item,{children:Object(m.jsx)("h4",{"data-testid":"header-user-name",children:" Bem vindo\n              ".concat(t)})})}),Object(m.jsxs)("div",{className:"headerItens",children:[Object(m.jsx)(L.a.Item,{children:Object(m.jsx)(L.a.Link,{href:"/favorites","data-testid":"link-to-favorites",children:"Favorites"})}),Object(m.jsx)(L.a.Item,{children:Object(m.jsx)(L.a.Link,{href:"/profile","data-testid":"link-to-profile",children:"Profile"})}),Object(m.jsx)(L.a.Item,{children:Object(m.jsx)(L.a.Link,{href:"/search","data-testid":"link-to-search",children:"Search"})})]})]})}}]),n}(a.Component)),F=function(){var t=Object(b.a)(h.a.mark((function t(e){var n,a,r,c,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,s=c.results,i=s.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=F,U=(n(60),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).request=Object(b.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.valueSearch,t.setState({loading:!0}),e.next=4,J(n);case 4:if(a=e.sent,t.setState({endValueSearch:n,valueSearch:"",loading:!1}),0!==a.length){e.next=8;break}return e.abrupt("return",t.setState({result:!1}));case 8:return console.log(a),e.abrupt("return",t.setState({result:!0,albuns:a}));case 10:case"end":return e.stop()}}),e)}))),t.input=function(e){var n=e.target;return t.setState({valueSearch:n.value}),n.value.length>=2?t.setState({stateButton:!1}):t.setState({stateButton:!0})},t.state={valueSearch:"",stateButton:!0,loading:!1,result:"INITIAL",albuns:[],endValueSearch:""},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.valueSearch,n=t.stateButton,a=t.loading,r=t.result,c=t.albuns,s=t.endValueSearch;return Object(m.jsxs)("div",{"data-testid":"page-search",className:"allSearch",children:[Object(m.jsx)(P,{className:"headerSpace"}),a?Object(m.jsx)(x,{}):Object(m.jsx)(p.a,{className:"searchContainer",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Search"}),Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{htmlFor:"inputsearch",children:Object(m.jsx)("input",{id:"inputsearch",type:"text","data-testid":"search-artist-input",onChange:this.input,value:e,placeholder:"Pesquise por um artista, album ou m\xfasica"})}),Object(m.jsx)(O.a,{type:"button",id:"searchButton","data-testid":"search-artist-button",onClick:this.request,disabled:n,children:"Pesquisar"})]})]})}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(f.a,{children:c.length>0?Object(m.jsx)("h2",{children:"Resultado de \xe1lbuns de: ".concat(s)}):Object(m.jsx)(m.Fragment,{children:" "})}),Object(m.jsx)("div",{className:"resultContainer",children:r?c.map((function(t){var e=t.collectionId,n=t.collectionName,a=t.artworkUrl100,r=t.artistName;return Object(m.jsx)(C.b,{className:"linkCard",to:"/album/".concat(e),"data-testid":"link-to-album-".concat(e),children:Object(m.jsxs)(B.a,{className:"cardResult",style:{width:"18rem"},children:[Object(m.jsx)(B.a.Img,{variant:"top",src:a}),Object(m.jsxs)(B.a.Body,{children:[Object(m.jsx)(B.a.Title,{children:r}),Object(m.jsx)(B.a.Text,{children:n})]})]},e)},e)})):Object(m.jsx)(m.Fragment,{children:" Nenhum \xe1lbum foi encontrado "})})]})]})}}]),n}(a.Component)),T=function(){var t=Object(b.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=T,A=n(41),D="favorite_songs";JSON.parse(localStorage.getItem(D))||localStorage.setItem(D,JSON.stringify([]));var E=function(){return JSON.parse(localStorage.getItem(D))},R=function(t){return localStorage.setItem(D,JSON.stringify(t))},K=function(t){return function(e){setTimeout((function(){e(t)}),500)}},M=function(t){return new Promise((function(e){if(t){var n=E();R([].concat(Object(A.a)(n),[t]))}K("OK")(e)}))},V=function(t){return new Promise((function(e){var n=E();R(n.filter((function(e){return e.trackId!==t.trackId}))),K("OK")(e)}))},Q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).saveList=Object(b.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(t){var e=E();K(e)(t)}));case 2:n=e.sent,t.setState({favorites:n},(function(){var e=t.state.favorites,n=t.props.music;e.forEach((function(e){e.trackId===n.trackId&&t.setState({fav:!0})}))}));case 4:case"end":return e.stop()}}),e)}))),t.checkFav=Object(b.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state.fav,a=t.props.music,t.setState({loading:!0}),!n){e.next=9;break}return e.next=6,V(a);case 6:t.setState({fav:!1,loading:!1}),e.next=12;break;case 9:return e.next=11,M(a);case 11:t.setState({fav:!0,loading:!1});case 12:case"end":return e.stop()}}),e)}))),t.state={loading:!1,fav:!1,favorites:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.saveList()}},{key:"render",value:function(){var t=this.props.music,e=t.trackName,n=t.previewUrl,a=t.trackId,r=t.artworkUrl100,c=this.state,s=c.loading,i=c.fav;return s?Object(m.jsx)("p",{children:"Carregando..."}):Object(m.jsxs)(B.a,{style:{width:"21rem"},className:"cardResult",children:[Object(m.jsx)(B.a.Img,{variant:"top",src:r}),Object(m.jsxs)(B.a.Body,{children:[Object(m.jsx)(B.a.Title,{children:e}),Object(m.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(m.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," "," ",Object(m.jsx)("code",{children:"audio"}),"."]}),Object(m.jsx)(B.a.Footer,{children:Object(m.jsxs)("label",{htmlFor:a,children:["Favorita",Object(m.jsx)("input",{type:"checkbox",id:a,"data-testid":"checkbox-music-".concat(a),onChange:this.checkFav,checked:i})]})})]})]})}}]),n}(a.Component),_=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).getList=function(){var e=Object(b.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(n);case 2:a=e.sent,t.setState({info:a[0],musics:a.slice(1)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={info:{},musics:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.id;this.getList(t)}},{key:"render",value:function(){var t=this.state,e=t.musics,n=t.info;return Object(m.jsxs)("div",{"data-testid":"page-album",children:[Object(m.jsx)(P,{}),0===e.length?Object(m.jsx)(x,{}):Object(m.jsxs)("div",{className:"resultContainer",children:[Object(m.jsx)(B.a,{children:Object(m.jsxs)("div",{className:"titleAlbum",children:[Object(m.jsx)("h1",{"data-testid":"artist-name",children:n.artistName}),Object(m.jsx)("h2",{"data-testid":"album-name",children:n.collectionName})]})}),e.map((function(t){return Object(m.jsx)(Q,{music:t},t.trackId)}))]})]})}}]),n}(a.Component),z=_,G=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{"data-testid":"page-favorites",children:[Object(m.jsx)(P,{}),Object(m.jsx)("h1",{children:"Favorites"})]})}}]),n}(a.Component),H=G,W=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{"data-testid":"page-profile",children:[Object(m.jsx)(P,{}),Object(m.jsx)("h1",{children:"Profile"})]})}}]),n}(a.Component),X=W,Y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(m.jsx)(P,{}),Object(m.jsx)("h1",{children:"ProfileEdit"})]})}}]),n}(a.Component),Z=Y,$=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{"data-testid":"page-not-found",children:Object(m.jsx)("h1",{children:"NotFound"})})}}]),n}(a.Component),tt=$,et=(n(61),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{path:"/",component:I,exact:!0}),Object(m.jsx)(j.b,{path:"/search",component:U,exact:!0}),Object(m.jsx)(j.b,{path:"/album/:id",component:z}),Object(m.jsx)(j.b,{path:"/favorites",component:H}),Object(m.jsx)(j.b,{path:"/profile",component:X,exact:!0}),Object(m.jsx)(j.b,{path:"/profile/edit",component:Z}),Object(m.jsx)(j.b,{path:"/load",component:x,exact:!0}),Object(m.jsx)(j.b,{path:"/*",component:tt})]})})}}]),n}(r.a.Component)),nt=et;s.a.render(Object(m.jsx)(C.a,{children:Object(m.jsx)(nt,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.2ff1d35c.chunk.js.map